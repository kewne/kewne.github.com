@startuml toggle_params
!theme mars
skinparam NoteFontName Courier

actor Client as client
boundary API as api

== Basic Request ==

client -> api++: GET /users/123
return 200 OK
note left
{
  "id": "123",
  "name": "John Doe",
  "email": "john.doe@example.com",
  "created_at": "2023-01-15T10:30:00Z",
  "_links": {
    "self": {
      "href": "/api/users/123"
    },
    "orders": {
      "href": "/api/users/123/orders"
    }
  }
}
endnote

== Request with Toggle Parameter ==

client -> api++: GET /users/123?include_order_stats=true
return 200 OK
note left
{
  "id": "123", 
  "name": "John Doe",
  "email": "john.doe@example.com",
  "created_at": "2023-01-15T10:30:00Z",
  <color:red>"order_stats": {
  <color:red>  "total_orders": 42,
  <color:red>  "total_spent": {
  <color:red>    "amount": 1299.50,
  <color:red>    "currency": "USD"
  <color:red>  },
  <color:red>  "average_order_value": 30.94,
  <color:red>  "last_order_date": "2024-12-01T14:22:00Z"
  <color:red>},
  "_links": {
    "self": {
      "href": "/api/users/123"
    },
    "orders": {
      "href": "/api/users/123/orders"
    }
  }
}
endnote

@enduml
